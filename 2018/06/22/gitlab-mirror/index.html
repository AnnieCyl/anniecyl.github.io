<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>gitlab 镜像工程</title><link rel="shortcut icon" href="/images/avatar.png"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/highlight.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"></head><body><nav class="main-nav"><a href="/">Home</a><a href="/archives">Archives</a><a href="/about">About</a></nav><div class="profile"><section id="wrapper"><header id="header"><a href="/about"><img class="2x" id="avatar" src="/images/avatar.png"></a><h1>Annie's Blog</h1></header></section></div><section class="post" id="wrapper"><article><header><h1>gitlab 镜像工程</h1><h2 class="headline">2018-06-22 20:58:46·322 words
·1 minutes read<span class="tags"></span></h2></header><section id="post-body"><p>有时候需要在两个 gitlab 服务器之间做镜像文件，这样，在一个服务器上的更改可以同步到另一个服务器上。<br>假设有两个服务器，A 服务器和 B 服务器：</p>
<ul>
<li>pull 镜像：在 B 上开发的工程，在 A 上做此工程的 pull 镜像，每次 B 的这个工程有更新，A 会自动 pull 过来。<br>步骤：</li>
<li>push 镜像：在 A 上开发的工程，做 push 镜像到 B 上，每次 A 的这个工程有更新，A 会自动 push 到 B 上。操作步骤如下：<ul>
<li>在 B 上创建一个用户，例如 autopush</li>
<li>如果 B 上还没有对应工程，创建一个对应工程，将 autopush 用户添加到该工程中。然后复制该工程的 http 地址。</li>
<li>在 A 上进入工程的 Repository 配置 push 镜像<br><img src="/img/2018-06-22-gitlab-mirror/1.png" alt="1"></li>
<li>将 B 上的工程地址和 autopush 用户组合起来，例如，<a href="http://autopush:password@github.com/annie/demo.git" target="_blank" rel="noopener">http://autopush:password@github.com/annie/demo.git</a><br><img src="/img/2018-06-22-gitlab-mirror/2.png" alt="2"></li>
<li>如果 B 上这个工程是在某个 group 下，则这个 group 的成员都有对此工程的访问权限，此时需要在此工程的 Member 下把 group 中的每个成员添加为 reporter，因为 B 上这个工程为镜像工程，不能允许有人在镜像工程进行 push 操作。</li>
</ul>
</li>
</ul>
</section><nav id="post-nav"><span class="prev"><a href="/2018/06/24/rxjava2x/"><span class="arrow">←</span>Newer Posts</a></span><span class="next"><a href="/2018/06/21/install-git/">Older Posts<span class="arrow">→</span></a></span></nav></article></section><footer id="footer"><div id="social"><a class="symbol" href="https://github.com/AnnieCyl"><i class="fa fa-github"></i></a></div><p class="small">© Copyright 2018 &nbsp;<i class="fa fa-heart" aria-hidden="true">&nbsp;Annie</i></p><p class="small">Powered by &nbsp;<a href="https://hexo.io/">Hexo &nbsp;</a>Theme By &nbsp;<a href="https://github.com/AnnieCyl/hexo-theme-annie">Annie</a></p></footer></body></html>