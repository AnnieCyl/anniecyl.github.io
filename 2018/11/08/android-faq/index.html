<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Android FAQ</title><link rel="shortcut icon" href="/images/avatar.png"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/highlight.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"></head><body><nav class="main-nav"><a href="/">Home</a><a href="/archives">Archives</a><a href="/about">About</a></nav><div class="profile"><section id="wrapper"><header id="header"><a href="/about"><img class="2x" id="avatar" src="/images/avatar.png"></a><h1>Annie's Blog</h1></header></section></div><section class="post" id="wrapper"><article><header><h1>Android FAQ</h1><h2 class="headline">2018-11-08 10:03:41·1,081 words
·5 minutes read<span class="tags"></span></h2></header><div id="toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-1"><span class="toc-text">FAQ 1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-2"><span class="toc-text">FAQ 2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-3"><span class="toc-text">FAQ 3</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-4"><span class="toc-text">FAQ 4</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-5"><span class="toc-text">FAQ 5</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-6"><span class="toc-text">FAQ 6</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-7"><span class="toc-text">FAQ 7</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-8"><span class="toc-text">FAQ 8</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-9"><span class="toc-text">FAQ 9</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ-10"><span class="toc-text">FAQ 10</span></a></li></ol></div><section id="post-body"><h1 id="FAQ-1"><a href="#FAQ-1" class="headerlink" title="FAQ 1"></a>FAQ 1</h1><p><strong>No toolchains found in the NDK toolchains folder for ABI with prefix: mips64el-linux-android</strong></p>
<p>找到自己本地的 android-sdk：<br><img src="/img/2018-11-08-android-faq/as-sdk.jpg" alt="as-sdk"></p>
<p>打开这个目录后，查看 <code>ndk-bundle</code> -&gt; <code>toolchains</code> 里面是否确实缺少 mips64el 相关的文件。</p>
<p>解决办法：</p>
<ul>
<li><a href="https://developer.android.com/ndk/downloads/?hl=zh-cn" target="_blank" rel="noopener">点击这里</a>下载 NDK 包。</li>
<li>解压之后打开 <code>toolchains</code> 文件夹，跟本地 <code>toolchains</code> 文件夹做对比，找到其缺少的文件夹，复制过去。</li>
</ul>
<h1 id="FAQ-2"><a href="#FAQ-2" class="headerlink" title="FAQ 2"></a>FAQ 2</h1><p><strong>Installation failed with message Invalid File</strong></p>
<p>如果设备上应用明明已经卸载了，但是 AS 在 Run 这个应用的时候还是一直提示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Installation failed with message Invalid File: xxxx. It is possible that this issue is resolved by uninstalling an existing version of the apk if it is present, and then re-installing.</span><br><span class="line">WARNING: Uninstalling will remove the application data!</span><br><span class="line">Do you want to uninstall the existing application?</span><br></pre></td></tr></table></figure></p>
<p>可以尝试以下这个方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Settings&gt;Build,execute,deployment&gt;Instant run&gt;Enable instant run to hot swap code /resource change on deploy(unchecked this option)</span><br></pre></td></tr></table></figure></p>
<h1 id="FAQ-3"><a href="#FAQ-3" class="headerlink" title="FAQ 3"></a>FAQ 3</h1><p><strong>Module not specified</strong></p>
<p>如果 app 模块上有个红叉：<br><img src="/img/2018-11-08-android-faq/module-not-specified-1.png" alt="module-not-specified-1"><br>且运行的时候弹出如下的提示框：<br><img src="/img/2018-11-08-android-faq/module-not-specified-2.png" alt="module-not-specified-2"><br>在 settings.gradle 中，先注释掉 include’：app’，然后单击 File &gt; Sync Project with Gradle files。<br>此后在 settings.gradle 恢复 include’：app’，再 Sync 工程。</p>
<h1 id="FAQ-4"><a href="#FAQ-4" class="headerlink" title="FAQ 4"></a>FAQ 4</h1><p><strong>ERROR: SSL peer shut down incorrectly</strong></p>
<p>project 级别的<em>build.gradle</em> 里面把 <code>jcenter()</code> 注释掉。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        maven &#123; url &apos;http://maven.aliyun.com/nexus/content/groups/public/&apos; &#125;</span><br><span class="line">//        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="FAQ-5"><a href="#FAQ-5" class="headerlink" title="FAQ 5"></a>FAQ 5</h1><p><strong>Command line is too long</strong></p>
<p>修改项目下 <code>.idea\workspace.xml</code>，找到标签 <code>&lt;component name=&quot;PropertiesComponent&quot;&gt;</code>， 在标签里加一行<code>&lt;property name=&quot;dynamic.classpath&quot; value=&quot;true&quot; /&gt;</code></p>
<h1 id="FAQ-6"><a href="#FAQ-6" class="headerlink" title="FAQ 6"></a>FAQ 6</h1><p><strong>Android Studio Build Output 栏内汉字出现乱码</strong></p>
<p><img src="/img/2018-11-08-android-faq/build-output-mass-code.png" alt="build-output-mass-code"><br>打开 Android Studio 双击 shift 或者点击以下搜索按钮：<br><img src="/img/2018-11-08-android-faq/search.png" alt="search"><br>在搜索框内输入 Edit Custom VM Options：<br><img src="/img/2018-11-08-android-faq/edit-custom-vm-options.png" alt="edit-custom-vm-options"><br>点击第一个选项打开 studio64.exe.vmoptions（若没有此文件，则先创建），添加一句代码 <code>-Dfile.encoding=UTF-8</code>，并编译一下，必须编译，否则 AS 重启的话无法正常打开。<br><img src="/img/2018-11-08-android-faq/studio64-vmoptions.png" alt="studio64-vmoptions"><br>编译以后重启 AS 即可。</p>
<h1 id="FAQ-7"><a href="#FAQ-7" class="headerlink" title="FAQ 7"></a>FAQ 7</h1><p><strong>Program type already present</strong></p>
<p>工程结构是这样的：</p>
<ol>
<li>lib1 定义的是各种接口文件，导出成 lib1.aar</li>
<li>lib2 引用 lib1.aar，并对 lib1 的接口进行实现，导出成 lib2.aar</li>
<li>app 引用 lib1 和 lib2，但是编译的时候一直会提示 <code>Program type already present</code> 的错误，明明只有 lib1 中定义一次的 interface，也还是会提示 <code>Program type already present</code> 这个错误</li>
</ol>
<p>各种尝试 <code>implementation</code>、<code>api</code>、<code>compileOnly</code> 来引用这两个 aar，依然会出现这个问题（非常抓狂。。。）。最后看到一个网友说不要使用 <code>implementation fileTree(include: [&#39;*.jar&#39;, &#39;*.aar&#39;], dir: &#39;libs&#39;)</code>，否则就会出现 <code>Program type already present</code> 问题。</p>
<p>于是终于发现在 app 的 gradle 中要么使用 <code>implementation fileTree(include: [&#39;*.jar&#39;, &#39;*.aar&#39;], dir: &#39;libs&#39;)</code>，一下子引入 libs 下所有的 jar 和 aar：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation fileTree(include: [&apos;*.jar&apos;, &apos;*.aar&apos;], dir: &apos;libs&apos;)</span><br><span class="line">// implementation(name:&apos;lib1&apos;,ext:&apos;aar&apos;)</span><br><span class="line">// implementation(name:&apos;lib2&apos;,ext:&apos;aar&apos;)</span><br></pre></td></tr></table></figure></p>
<p>要么就是不用 <code>implementation fileTree(include: [&#39;*.jar&#39;, &#39;*.aar&#39;], dir: &#39;libs&#39;)</code>，直接引用具体的 aar：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// implementation fileTree(include: [&apos;*.jar&apos;, &apos;*.aar&apos;], dir: &apos;libs&apos;)</span><br><span class="line">implementation(name:&apos;lib1&apos;,ext:&apos;aar&apos;)</span><br><span class="line">implementation(name:&apos;lib2&apos;,ext:&apos;aar&apos;)</span><br></pre></td></tr></table></figure></p>
<p>如果同时使用 <code>implementation fileTree</code> 和引用具体的 aar（如下），就会出现 <code>Program type already present</code> 这个错。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation fileTree(include: [&apos;*.jar&apos;, &apos;*.aar&apos;], dir: &apos;libs&apos;)</span><br><span class="line">implementation(name:&apos;lib1&apos;,ext:&apos;aar&apos;)</span><br><span class="line">implementation(name:&apos;lib2&apos;,ext:&apos;aar&apos;)</span><br></pre></td></tr></table></figure></p>
<h1 id="FAQ-8"><a href="#FAQ-8" class="headerlink" title="FAQ 8"></a>FAQ 8</h1><p>在界面添加 Button 的时候，默认 Button 显示的字母都是大写的，即使它的 text 属性设置的都是小写字母。</p>
<p>解决办法：在 Button 的属性里加上 android:textAllCaps=”false” 即可。</p>
<h1 id="FAQ-9"><a href="#FAQ-9" class="headerlink" title="FAQ 9"></a>FAQ 9</h1><p><strong>Installed Build Tools revision 29.0.2 is corrupted. Remove and install again using the SDK Manager.</strong></p>
<p>解决办法：</p>
<ol>
<li>Open the SDK manager by clicking on the icon in the top right of Android Studio. (Or go to File &gt; Settings &gt; Appearance &amp; Behavior &gt; System Settings &gt; Android SDK)</li>
<li>Open <strong>SDK Tools</strong> tab</li>
<li>At the bottom-right, click “Show Package Details”</li>
<li>Find <strong>Android SDK Build-Tools</strong> and uncheck the checkbox next to 29.0.2</li>
<li>Click apply in the bottom of the window. That will delete the component.</li>
<li>Now check the checkbox next to 29.0.2</li>
<li>Click apply in the bottom of the window. That will reinstall it.</li>
</ol>
<h1 id="FAQ-10"><a href="#FAQ-10" class="headerlink" title="FAQ 10"></a>FAQ 10</h1><p><strong>查看 apk 信息（包名、版本号、版本名称、兼容 api 级别、启动 Activity 等）</strong></p>
<ol>
<li>找到 Android SDK 目录下的 <code>build-tools</code> 文件夹，会有不同版本的，随便点开一个，可以看到 aapt</li>
<li>可以将 aapt 路径添加到环境变量中，也可以直接在 aapt 所在目录下启动命令行工具</li>
<li>在命令行工具中输入以下命令获取 apk 信息，比如要获取的 apk 是 app-debug.apk，则运行：<code>aapt dump badging app-debug.apk</code>。当然，apk 需要写全路径</li>
</ol>
</section><nav id="post-nav"><span class="prev"><a href="/2019/02/20/DUKPT/"><span class="arrow">←</span>Newer Posts</a></span><span class="next"><a href="/2018/11/07/navigation/">Older Posts<span class="arrow">→</span></a></span></nav></article></section><footer id="footer"><div id="social"><a class="symbol" href="https://github.com/AnnieCyl"><i class="fa fa-github"></i></a></div><p class="small">© Copyright 2018 &nbsp;<i class="fa fa-heart" aria-hidden="true">&nbsp;Annie</i></p><p class="small">Powered by &nbsp;<a href="https://hexo.io/">Hexo &nbsp;</a>Theme By &nbsp;<a href="https://github.com/AnnieCyl/hexo-theme-annie">Annie</a></p></footer></body></html>